# Tw img masker

黒背景と白背景での画像の見え方の違いを利用して、Twitterの画像をタップしたときにのみ表示されるように編集するツール。
ブラウザでアクセスすることで動作する。
マスク画像、透過の設定などはすべてブラウザのローカルストレージに保存される。

## 使い方

1. ページにアクセスする。
2. マスクしたい画像をアップロードする。
3. 変換ボタンを押す。
4. 変換した画像がプレビューウィンドウに表示される。保存ボタンを押して保存する。

## カスタマイズ項目

- マスク画像の変更  
  マスク画像をアップロードすることで、デフォルトのマスク画像を変更できる。
- 色の自動変換
  - グレイスケールに変換  
	画像をグレイスケールに変換する。デフォルトで有効。
- 解像度設定
  - 最大幅、高さの設定
	変換後の画像の最大幅と高さを設定できる。デフォルトは1024px。スイッチで有効/無効を切り替え可能。

カスタマイズ項目はUIの優先度としては低いため、ほかのコンポーネントを優先して表示する。

マスク画像と変換する画像の解像度が一致していない場合、マスク画像の中に変換する画像がアスペクト比を維持したまま収まるようにリサイズされる。(cssの`object-fit: contain`と同様の動作)

## ソフトウェア構成

- フロントエンド: React + TypeScript + Vite
- 画像処理: HTML5 Canvas API
- スタイリング: Tailwind CSS
- 状態管理: React Context API
- ビルドツール: Vite
- デプロイ: GitHub Pages

## 型チェック

型チェックはTypeScriptによって行われる。開発環境では`tsc --noEmit`コマンドを使用して型エラーを検出できる。

## テスト

test_data/にサンプル用の画像がある。それらを使用して動作することを確認する。

ユニットテストはVitestで実行する。`npm test`で`tests/`配下のテストが動作する。
